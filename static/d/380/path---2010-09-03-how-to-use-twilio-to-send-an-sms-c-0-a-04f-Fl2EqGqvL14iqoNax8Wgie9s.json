{"data":{"site":{"siteMetadata":{"title":"A Blog","author":"Scott Williams"}},"markdownRemark":{"id":"98a2e587-54ff-5275-88b5-6b1ddd31d328","excerpt":"I wrote about  liking Twilio’s UI  not too long ago. Unfortunately the actual usability of their API isn’t quite as sharp. Signing up was straightforward enough…","html":"<p>I wrote about <a href=\"./1279646643000.jpg\">liking Twilio’s UI</a> not too long ago. Unfortunately the actual usability of their API isn’t quite as sharp.</p>\n<p>Signing up was straightforward enough, but beyond that things got incredibly murky. All I want is to be able to send an SMS from my app; I don’t really care about anything else.</p>\n<p>The examples provided for ruby don’t detail this, but fortunately I stumbled around long enough to figure it out.</p>\n<p>First, you need to <a href=\"https://www.twilio.com/user/account/phone-numbers/\">register the phone number</a> you will be sending the SMSes to (this limitation is only for the developer trial period, I believe). Under “My Outgoing CallerID Numbers” section click the “Add Caller ID” button. This will prompt you for a phone number. Enter yours, and it will present you with a PIN and call the number entered. Pick up the call when it rings and enter the PIN when prompted.</p>\n<p>Next grab the helper library <a href=\"http://www.twilio.com/docs/libraries/\">over here</a>. I did this in Ruby, so just extract the zip and get ‘twiliolib.rb’ from the ‘lib’ folder. For a simple test I wrote the following script:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string\">'twiliolib.rb'</span>\n\n<span class=\"token comment\"># your Twilio authentication credentials</span>\n<span class=\"token constant\">ACCOUNT_SID</span> <span class=\"token operator\">=</span> <span class=\"token string\">'xxx'</span> <span class=\"token comment\"># these are on your account page</span>\n<span class=\"token constant\">ACCOUNT_TOKEN</span> <span class=\"token operator\">=</span> <span class=\"token string\">'xxx'</span>\n \n<span class=\"token comment\"># version of the Twilio REST API to use</span>\n<span class=\"token constant\">API_VERSION</span> <span class=\"token operator\">=</span> <span class=\"token string\">'2010-04-01'</span>\n\naccount <span class=\"token operator\">=</span> <span class=\"token constant\">Twilio</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">RestAccount</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ACCOUNT_SID</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ACCOUNT_TOKEN</span><span class=\"token punctuation\">)</span>\n\nd <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'From'</span> <span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>gt<span class=\"token punctuation\">;</span> <span class=\"token string\">'415-599-2671'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'To'</span> <span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>gt<span class=\"token punctuation\">;</span> <span class=\"token string\">'480-555-1234'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># this is the number you registered</span>\n    <span class=\"token string\">'Body'</span> <span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>gt<span class=\"token punctuation\">;</span> <span class=\"token string\">'This is an SMS Test'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\nresp <span class=\"token operator\">=</span> account<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>API_VERSION<span class=\"token delimiter tag\">}</span></span>/Accounts/<span class=\"token interpolation\"><span class=\"token delimiter tag\">#{</span>ACCOUNT_SID<span class=\"token delimiter tag\">}</span></span>/SMS/Messages\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span>\n    \nresp<span class=\"token punctuation\">.</span>error<span class=\"token operator\">!</span> <span class=\"token keyword\">unless</span> resp<span class=\"token punctuation\">.</span>kind_of<span class=\"token operator\">?</span> <span class=\"token constant\">Net</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">HTTPSuccess</span>\nputs <span class=\"token string\">\"code: %s\\nbody: %s\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">[</span>resp<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">,</span> resp<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">]</span></code></pre></div>\n<p>The key here is that the ‘From’ number is the Sandbox Phone Number listed on your account dashboard, and the ‘To’ number is the one you registered up above. <strong>Any other numbers will not work</strong>. Don’t forget to put in your ACCOUNT<em>SID and ACCOUNT</em>TOKEN too, those are also on the dashboard.</p>\n<p>Fire up your console and run the script. If you see a bunch of XML and a ‘code: 201’ returned, you should be receiving and SMS shortly. If you see a ‘400 “Bad Request” (Net::HTTPServerException)’ error, then double check that the From and To numbers are right.</p>\n<p>This information is buried and I was very close to just throwing my hands up and looking elsewhere. If you are writing an application, these details are critical.</p>","frontmatter":{"title":"How to Use Twilio to Send an SMS","date":"September 03, 2010"}}},"pageContext":{"slug":"/2010/09/03/how-to-use-twilio-to-send-an-sms/","previous":{"fields":{"slug":"/2010/08/27/macbook-pro-likes-dislikes/"},"frontmatter":{"title":"MacBook Pro Likes & Dislikes"}},"next":{"fields":{"slug":"/2010/09/03/yeah-this-is-what-i-wanted-to-see-at-espncom/"},"frontmatter":{"title":"Yeah this is what I wanted to see at espn.com"}}}}