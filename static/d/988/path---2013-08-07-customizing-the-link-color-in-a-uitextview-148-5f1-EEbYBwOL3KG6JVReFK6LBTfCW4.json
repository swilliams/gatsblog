{"data":{"site":{"siteMetadata":{"title":"A Blog","author":"Scott Williams"}},"markdownRemark":{"id":"38ae9c61-6782-5c62-8f69-4025df7a02d9","excerpt":"UITextView’s  can automatically detect URLs and treat them accordingly. This is a  nice  feature, but when you start to customize your UI, you might run into…","html":"<p><a href=\"http://developer.apple.com/library/ios/#documentation/uikit/reference/uitextview_class/Reference/UITextView.html\">UITextView’s</a> can automatically detect URLs and treat them accordingly. This is a <em>nice</em> feature, but when you start to customize your UI, you might run into this situation:</p>\n<figure>\n    \n  <a class=\"gatsby-resp-image-link\" href=\"/static/d523d38b42fe812ce66216964acf336a/65af2/badpopover.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 255px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.50980392156863%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACgklEQVQoz22TWU8aURTH57s0yqKzgMwMy2zwVkhMW0egApVNRxFRSPvaxKSpNep3adrGFlr3F21TIBSMsi8quBDjN+gZEEpMb345OXPu+c+999xzkYuLUi6X3Nn5dnDwfX9fZm8v0XG69iGyuxvvs739NZP5dXlZRu7uLldW3mq1Y0aj0WAw6PWGjiP7nSE7JpOJ6w1BEEiSikYjrVYFKRZzkUiYYRhJCjocDpfLKYovRFGcmJhwuaacTqfdPmm1WkHPMCwAehD7fNP1eh6pVE6Xlhbh916vz+NxTL2cBqXHY3e5Jt1uuyg+d7ud4+NPGQYWNwA8z1KULK7VzpDr63osFsYxbuhJTDE0q1IEFMOh4aE5xbCkVAZUCoh4VcqFEdXyiDqiVr5GR2IkafT5XsliKFg0tqghWJ12BsdCWiKgIYKAVuMnsHkCkzA0rFa+ARmOSjT1zGSyUZT+YeVaLR8DsYbREBKKhjBUwrFZHAM7g46GcDxI4AFsdB4ipM7OsSZBYCiKfhBfXdWWlyM63ZjZbOR5uoO+B81zeq7r8HqOM7Isx/PCP3GrVYW6kyQpCGaO4+EuOlYGUlm5uvwAcFU8Tfe2fXKSCoXmcJyAgtMDA0rKdqSwzuCANIIg/H5vo1FAqtXTePzz+voqsLHxYRCbzWqxWFZX321urvWD4K+tvd/a+thslpFms3J722i3L9rt85ubRhe4v/v71uHhj3j8Ezjw2Z/qApU6Py/KHZbPZ4rFbKHwp1o9q9cLXeBI6fRxKnUMXdRoFPvxPrI4m/2dSh1BowNwBLh2SAVbKuUSiS/wJODZwO7ghJD9CGiSMrwPyAb7aC6d/plMHnUX+S9/ATxf0YZ3ikEpAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"eww\" title=\"\" src=\"/static/d523d38b42fe812ce66216964acf336a/65af2/badpopover.png\" srcset=\"/static/d523d38b42fe812ce66216964acf336a/0da9a/badpopover.png 148w,\n/static/d523d38b42fe812ce66216964acf336a/65af2/badpopover.png 255w\" sizes=\"(max-width: 255px) 100vw, 255px\">\n    </span>\n  </span>\n  \n  </a>\n    \n    <figcaption>Ewwwwww</figcaption>\n</figure>\n<p>That contrast between the background and foreground colors makes it pretty hard to read. A quick poke through the docs and on <a href=\"http://stackoverflow.com/questions/1350423/can-i-change-the-color-of-auto-detected-links-on-uitextview\">StackOverflow</a> reveals that there isn’t any way to change the color of the link, without resorting to <a href=\"http://stackoverflow.com/a/17294355/736\">private API’s</a>.</p>\n<p>Sooo, the best course of action is to just knuckle down and use a UIWebView to display what you want.</p>\n<p>To try to keep things relatively sane, I first added a static <code class=\"language-text\">html</code> file to my project with this content:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style language-css\">\n     <span class=\"token selector\">html, body, div</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> #3D3D3D<span class=\"token punctuation\">;</span>\n         <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> HelveticaNeue-Medium, Helvetica<span class=\"token punctuation\">;</span>\n         <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 12pt<span class=\"token punctuation\">;</span>\n         <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #FAFAF1<span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n    \n     <span class=\"token selector\">a</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #FAFAF1<span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n      REPLACEME\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>The CSS code is inlined in the file. There’s probably a way to keep it separate and inject it, but I didn’t need anything fancier than this.</p>\n<p>Loading it was pretty straightforward:</p>\n<div class=\"gatsby-highlight\" data-language=\"objc\"><pre class=\"language-objc\"><code class=\"language-objc\">+ (NSString *)htmlTemplate {\n  NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;html-template&quot; ofType:@&quot;html&quot;];\n  return [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];\n}</code></pre></div>\n<p>Then on my controller I called this method from <code class=\"language-text\">viewDidLoad</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"objc\"><pre class=\"language-objc\"><code class=\"language-objc\">- (void)setContentText:(NSString *)contentText {\n  NSString *template = [SNDThemeManager attributionTemplate];\n  NSString *htmlText = [template stringByReplacingOccurrencesOfString:@&quot;REPLACEME&quot; withString:contentText];\n  [contentView loadHTMLString:htmlText baseURL:nil];\n}</code></pre></div>\n<p><code class=\"language-text\">contentView</code> is the <code class=\"language-text\">UIWebView</code>. Almost done. If you tap on a link in the webview it’ll open that link in itself, which might not be what you want. The way around it is to set your controller to be a <code class=\"language-text\">UIWebViewDelegate</code> and implement <a href=\"http://stackoverflow.com/a/2899793/736\">this method</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"objc\"><pre class=\"language-objc\"><code class=\"language-objc\">- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {\n    if (navigationType == UIWebViewNavigationTypeLinkClicked) {\n        [[UIApplication sharedApplication] openURL:[request URL]];\n        return NO;\n    }\n    return YES;\n}</code></pre></div>\n<p>That’ll open it in Safari. If you want other browsers, well, knock yourself out. This is pretty much a giant mess for something that should be easy, but it’s just something that would have to be done if you want total control over the UI. The end result looks well enough:</p>\n<figure>\n    \n  <a class=\"gatsby-resp-image-link\" href=\"/static/a7106aad516005b1829b0cc52959ce49/29495/goodpopover.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n  \n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block;  max-width: 248px; margin-left: auto; margin-right: auto;\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 74.59677419354838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQoz31R309SYRg+/4/okIhfgwOcsdwCDAMDC5ApKJNpBY3NNhtOLr1w3bhZSxg33nTl2hqZU09rARkgEQhB/BBlMp3+Bz3wzYNG9ezZu/d93vc533u+j2o2KxsbkYWF50tLgWAwgNhL6MHg4lW+GAi8WFlZrlQOqXq9YLU+7OvjCQQCXhsD/W0M8Hj9EJHw+XySDw5i5BbA5wskEkk8zlLpdBzmkRGD1/vE5ZqcnfW43S6Hwz4x4Ziedk1NOT0et9M5OTPj1mg0NE2rVCpEtVrNsltUqZS12R4xjHpszDI6ajKbH+BDBsM9lBaLGfnwsN5ovG8yGZVKpVwuhxMROct+pGq1AuYw7vM99fufzc/75+Y8fr/P6308NHRHKLwtlcqwpFgskcsVBF1zsfjdbrfKZDKt9i4O0et1Op0WESUmyDTdgULxF3MGZpFIBEmKUzogieIf6JorlTzMYrEYNX0T/zHj2trmcvmHzWbFUaiVN0H8yh6QO9/b26KSyS/j4zahUEi25YBLIptjqes6RCgMw8RiLFWtFnZ3P4RCa+Hwq3D4NcdI5E3nCZnV1ZfIQ6Fud319bXPzLYzUycmvVqt2dtY4P2+0WnXC09Pa5WUzlYptb7+/uGii5FrcwNHRTyqXS+bzaTCXS1Wrh3h2QlxkMhnb3/+Mt6zXi5zOsW0+OEiA2ew3RCJh9Pi4XChkdnai0ei7TOYrtoOI1h+kMMfxeqPRKKXTiUTiE/6t10b4GzKcw5+27HZWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\">\n      <img class=\"gatsby-resp-image-image\" style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\" alt=\"Yay!\" title=\"\" src=\"/static/a7106aad516005b1829b0cc52959ce49/29495/goodpopover.png\" srcset=\"/static/a7106aad516005b1829b0cc52959ce49/3edf5/goodpopover.png 148w,\n/static/a7106aad516005b1829b0cc52959ce49/29495/goodpopover.png 248w\" sizes=\"(max-width: 248px) 100vw, 248px\">\n    </span>\n  </span>\n  \n  </a>\n    \n    <figcaption>Yay!</figcaption>\n</figure>","frontmatter":{"title":"Customizing the Link Color in a UITextView","date":"August 07, 2013"}}},"pageContext":{"slug":"/2013/08/07/customizing-the-link-color-in-a-uitextview/","previous":null,"next":{"fields":{"slug":"/2013/09/04/you-probably-shouldnt-buy-a-dslr/"},"frontmatter":{"title":"You Probably Shouldn't Buy a DSLR"}}}}